{"title":"Docker 容器使用","uid":"f4f86e9970dc96526d88d830c56237c7","slug":"Docker容器使用","date":"2022-01-21T09:22:11.000Z","updated":"2022-02-12T06:44:36.593Z","comments":true,"path":"api/articles/Docker容器使用.json","keywords":null,"cover":"https://imgapi.cn/api.php?zd=zsy&fl=fengjing&gs=images","content":"<h1 id=\"Docker-容器使用\"><a href=\"#Docker-容器使用\" class=\"headerlink\" title=\"Docker 容器使用\"></a>Docker 容器使用</h1><h2 id=\"Docker-客户端\"><a href=\"#Docker-客户端\" class=\"headerlink\" title=\"Docker 客户端\"></a>Docker 客户端</h2><p>docker 客户端非常简单 ,我们可以直接输入 <code>docker</code> 命令来查看到 Docker 客户端的所有命令选项。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">root@VM-16-2-ubuntu:# docker</code></pre>\n<p><img src=\"https://gitee.com/zniceya/picgo/raw/master/image/1637311002647.png\"></p>\n<p>可以通过命令 docker command –help 更深入的了解指定的 Docker 命令使用方法。</p>\n<p>例如我们要查看 <code>docker stats</code> 指令的具体使用方法：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">root@VM-16-2-ubuntu:# docker stats --help</code></pre>\n<p><img src=\"https://gitee.com/zniceya/picgo/raw/master/image/1637311054510.png\"></p>\n<h2 id=\"容器使用\"><a href=\"#容器使用\" class=\"headerlink\" title=\"容器使用\"></a>容器使用</h2><h3 id=\"获取镜像\"><a href=\"#获取镜像\" class=\"headerlink\" title=\"获取镜像\"></a>获取镜像</h3><p>如果我们本地没有 ubuntu 镜像，我们可以使用 docker pull 命令来载入 ubuntu 镜像：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker pull ubuntu</code></pre>\n<h3 id=\"启动容器\"><a href=\"#启动容器\" class=\"headerlink\" title=\"启动容器\"></a>启动容器</h3><p>以下命令使用 ubuntu 镜像启动一个容器，参数为以命令行模式进入该容器：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker run -it ubuntu &#x2F;bin&#x2F;bash</code></pre>\n\n<p>参数说明：</p>\n<ul>\n<li>-i: 交互式操作。</li>\n<li>-t: 终端。</li>\n<li>ubuntu: ubuntu 镜像。</li>\n<li>/bin/bash：放在镜像名后的是命令，这里我们希望有个交互式 Shell，因此用的是 /bin/bash。</li>\n</ul>\n<p>要退出终端，直接输入 exit:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">root@ed09e4490c57:&#x2F;# exit</code></pre>\n\n<h3 id=\"启动已停止运行的容器\"><a href=\"#启动已停止运行的容器\" class=\"headerlink\" title=\"启动已停止运行的容器\"></a>启动已停止运行的容器</h3><p>查看所有的容器命令如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker ps -a</code></pre>\n\n<p><img src=\"https://gitee.com/zniceya/picgo/raw/master/image/1637311231703.png\"></p>\n<p>使用 docker start 启动一个已停止的容器：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker start b750bbbcfd88 </code></pre>\n\n<h3 id=\"后台运行\"><a href=\"#后台运行\" class=\"headerlink\" title=\"后台运行\"></a>后台运行</h3><p>在大部分的场景下，我们希望 docker 的服务是在后台运行的，我们可以过 -d 指定容器的运行模式。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker run -itd --name ubuntu-test ubuntu &#x2F;bin&#x2F;bash</code></pre>\n<p><img src=\"https://gitee.com/zniceya/picgo/raw/master/image/1637311723318.png\"></p>\n<p>注：加了 -d 参数默认不会进入容器，想要进入容器需要使用指令 docker exec（下面会介绍到）。</p>\n<h3 id=\"停止一个容器\"><a href=\"#停止一个容器\" class=\"headerlink\" title=\"停止一个容器\"></a>停止一个容器</h3><p>停止容器的命令如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker stop &lt;容器 ID&gt;</code></pre>\n\n<p>停止的容器可以通过 docker restart 重启：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker restart &lt;容器 ID&gt;</code></pre>\n\n<h3 id=\"进入容器\"><a href=\"#进入容器\" class=\"headerlink\" title=\"进入容器\"></a>进入容器</h3><p>在使用 -d 参数时，容器启动后会进入后台。此时想要进入容器，可以通过以下指令进入：</p>\n<ul>\n<li>docker attach</li>\n<li>docker exec：推荐大家使用 docker exec 命令，因为此退出容器终端，不会导致容器的停止。</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>attach 命令</p></blockquote>\n<p>下面演示了使用 docker attach 命令。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker attach 1e560fca3906 </code></pre>\n\n<p>注意： 如果从这个容器退出，会导致容器的停止。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>exec 命令</p></blockquote>\n<p>下面演示了使用 docker exec 命令。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">docker exec -it 243c32535da7 &#x2F;bin&#x2F;bash</code></pre>\n\n<p>注意： 如果从这个容器退出，容器不会停止，这就是为什么推荐大家使用 docker exec 的原因。</p>\n<p>更多参数说明请使用 docker exec –help 命令查看。</p>\n<h3 id=\"导出和导入容器\"><a href=\"#导出和导入容器\" class=\"headerlink\" title=\"导出和导入容器\"></a>导出和导入容器</h3><h4 id=\"导出容器\"><a href=\"#导出容器\" class=\"headerlink\" title=\"导出容器\"></a>导出容器</h4><p>如果要导出本地某个容器，可以使用 docker export 命令。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker export 1e560fca3906 &gt; ubuntu.tar</code></pre>\n<p>导出容器 1e560fca3906 快照到本地文件 ubuntu.tar。</p>\n<p><img src=\"https://gitee.com/zniceya/picgo/raw/master/image/1637312031015.png\"></p>\n<p>这样将导出容器快照到本地文件。</p>\n<h4 id=\"导入容器快照\"><a href=\"#导入容器快照\" class=\"headerlink\" title=\"导入容器快照\"></a>导入容器快照</h4><p>可以使用 docker import 从容器快照文件中再导入为镜像，以下实例将快照文件 ubuntu.tar 导入到镜像 test/ubuntu:v1:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ cat docker&#x2F;ubuntu.tar | docker import - test&#x2F;ubuntu:v1</code></pre>\n<p>此外，也可以通过指定 URL 或者某个目录来导入，例如：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker import http:&#x2F;&#x2F;example.com&#x2F;exampleimage.tgz example&#x2F;imagerepo</code></pre>\n<h3 id=\"删除容器\"><a href=\"#删除容器\" class=\"headerlink\" title=\"删除容器\"></a>删除容器</h3><p>删除容器使用 docker rm 命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker rm -f 1e560fca3906</code></pre>\n<p><img src=\"https://gitee.com/zniceya/picgo/raw/master/image/1637312151326.png\"></p>\n<p>下面的命令可以清理掉所有处于终止状态的容器。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ docker container prune</code></pre>\n","text":"Docker 容器使用Docker 客户端docker 客户端非常简单 ,我们可以直接输入 docker 命令来查看到 Docker 客户端的所有命令选项。 root@VM-16-2-ubuntu:# docker 可以通过命令 docker command –help 更深入的...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"Docker","slug":"Docker","count":3,"path":"api/categories/Docker.json"}],"tags":[{"name":"Docker","slug":"Docker","count":3,"path":"api/tags/Docker.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Docker-%E5%AE%B9%E5%99%A8%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">Docker 容器使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Docker-%E5%AE%A2%E6%88%B7%E7%AB%AF\"><span class=\"toc-text\">Docker 客户端</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%B9%E5%99%A8%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">容器使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%8F%96%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">获取镜像</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">启动容器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8%E5%B7%B2%E5%81%9C%E6%AD%A2%E8%BF%90%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">启动已停止运行的容器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C\"><span class=\"toc-text\">后台运行</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%81%9C%E6%AD%A2%E4%B8%80%E4%B8%AA%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">停止一个容器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">进入容器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AF%BC%E5%87%BA%E5%92%8C%E5%AF%BC%E5%85%A5%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">导出和导入容器</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AF%BC%E5%87%BA%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">导出容器</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AF%BC%E5%85%A5%E5%AE%B9%E5%99%A8%E5%BF%AB%E7%85%A7\"><span class=\"toc-text\">导入容器快照</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">删除容器</span></a></li></ol></li></ol></li></ol>","author":{"name":"znicelya","slug":"znicelya","avatar":"https://gitee.com/zniceya/picgo/raw/master/image/20220211200943.jpeg","link":"/","description":"hexo,nicely,blog,aurora","socials":{"github":"https://github.com/znicelya","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/177279267"}}}},"mapped":true,"prev_post":{"title":"给网站加上鼠标点击烟花效果","uid":"95396110157e32674f9e9b0cbf309339","slug":"给网站加上鼠标点击烟花效果","date":"2022-02-05T09:22:11.000Z","updated":"2022-02-12T06:44:36.593Z","comments":true,"path":"api/articles/给网站加上鼠标点击烟花效果.json","keywords":null,"cover":"https://imgapi.cn/api.php?zd=zsy&fl=fengjing&gs=images","text":"给网站加上鼠标点击烟花效果 效果如图 具体实现 class Circle &#123; constructor(&#123; origin, speed, color, angle, context &#125;) &#123; this.origin &#x3D; origin...","link":"","photos":[],"count_time":{"symbolsCount":"5.4k","symbolsTime":"5 mins."},"categories":[{"name":"other","slug":"other","count":1,"path":"api/categories/other.json"}],"tags":[{"name":"other","slug":"other","count":1,"path":"api/tags/other.json"}],"author":{"name":"znicelya","slug":"znicelya","avatar":"https://gitee.com/zniceya/picgo/raw/master/image/20220211200943.jpeg","link":"/","description":"hexo,nicely,blog,aurora","socials":{"github":"https://github.com/znicelya","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/177279267"}}}}},"next_post":{}}