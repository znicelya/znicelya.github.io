{"title":"Mybatis配置详解","uid":"78ea6115ab3f3fc8e8054f26239972ae","slug":"Mybatis配置详解","date":"2022-02-10T11:40:11.000Z","updated":"2022-02-12T06:44:36.593Z","comments":true,"path":"api/articles/Mybatis配置详解.json","keywords":null,"cover":"https://imgapi.cn/api.php?zd=zsy&fl=fengjing&gs=images","content":"<h2 id=\"Mybatis配置详解\"><a href=\"#Mybatis配置详解\" class=\"headerlink\" title=\"Mybatis配置详解\"></a>Mybatis配置详解</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>MyBatis 的配置文件包含了会深深影响 MyBatis 行为的设置和属性信息。</p></blockquote>\n<p><strong>注意：这些配置的上下顺序必须严格按照约定顺序来，否则就会报错</strong></p>\n<ul>\n<li><p>configuration</p>\n<ul>\n<li>properties(属性)</li>\n<li>setting(设置)</li>\n<li>typeAliases(别名)</li>\n<li>plugins(插件)</li>\n<li>environments(环境配置)<ul>\n<li>environment（环境变量）<ul>\n<li>transactionManager（事务管理器）</li>\n<li>dataSource（数据源）</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>mapper(映射器)</li>\n</ul>\n<p>虽然官网上面的配置不止这些</p>\n<p>但以上的配置足以解决我们日常开发中的绝大部分问题</p>\n</li>\n</ul>\n<h3 id=\"1-1属性\"><a href=\"#1-1属性\" class=\"headerlink\" title=\"1.1属性\"></a>1.1属性</h3><pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;properties resource&#x3D;&quot;org&#x2F;mybatis&#x2F;example&#x2F;config.properties&quot;&gt;&lt;&#x2F;properties&gt;</code></pre>\n\n<p>我们可以使用properties标签配置来引入资源文件</p>\n<p>同时我们可以使用property属性来替换外部引入的资源文件的内容</p>\n<p>就像下面这样</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;properties resource&#x3D;&quot;org&#x2F;mybatis&#x2F;example&#x2F;config.properties&quot;&gt;\n  &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;dev_user&quot;&#x2F;&gt;\n  &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;F2Fa3!33TYyg&quot;&#x2F;&gt;\n&lt;&#x2F;properties&gt;</code></pre>\n\n<p>当我们引入外部资源文件之后我们的<strong>配置就可以写在配置文件</strong>里面而不需要全部写在我们的xml配置里面</p>\n<p><strong>可以减少代码的冗余，方便复用</strong></p>\n<p>就行我上一篇写的数据源那里</p>\n<p>我们可以直接使用  ${} 来获取外部配置文件里面的配置</p>\n<p>如下</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;\n  &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;$&#123;driver&#125;&quot;&#x2F;&gt;\n  &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;$&#123;url&#125;&quot;&#x2F;&gt;\n  &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;username&#125;&quot;&#x2F;&gt;\n  &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;$&#123;password&#125;&quot;&#x2F;&gt;\n&lt;&#x2F;dataSource&gt;</code></pre>\n\n<p>注意：我们的配置文件可以在多个地方进行配置</p>\n<p>注意不要造成配置文件里面的属性被覆盖</p>\n<p>外部配置文件读取顺序为：</p>\n<ul>\n<li>首先读取在 properties 元素体内指定的属性。</li>\n<li>然后根据 properties 元素中的 resource 属性读取类路径下属性文件，或根据 url 属性指定的路径读取属性文件，并覆盖之前读取过的同名属性。</li>\n<li>最后读取作为方法参数传递的属性，并覆盖之前读取过的同名属性。</li>\n</ul>\n<p>从 MyBatis 3.4.2 开始，我们可以为占位符指定一个默认值，这样如果外部配置文件少写某个属性也不会报错</p>\n<p>比如：</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;\n  &lt;!-- ... --&gt;\n  &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;username:ut_user&#125;&quot;&#x2F;&gt; \n    &lt;!-- 如果属性 &#39;username&#39; 没有被配置，&#39;username&#39; 属性的值将为 &#39;ut_user&#39; --&gt;\n&lt;&#x2F;dataSource&gt;</code></pre>\n\n<p>但是这个特性默认是关闭的，我们需要手动开启</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;properties resource&#x3D;&quot;org&#x2F;mybatis&#x2F;example&#x2F;config.properties&quot;&gt;\n  &lt;!-- ... --&gt;\n  &lt;property name&#x3D;&quot;org.apache.ibatis.parsing.PropertyParser.enable-default-value&quot; value&#x3D;&quot;true&quot;&#x2F;&gt; \n    &lt;!-- 启用默认值特性 --&gt;\n&lt;&#x2F;properties&gt;</code></pre>\n\n<h3 id=\"2-2设置\"><a href=\"#2-2设置\" class=\"headerlink\" title=\"2.2设置\"></a>2.2设置</h3><p> MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。</p>\n<p>我们使用时用到的可以说并不多</p>\n<table>\n<thead>\n<tr>\n<th><strong>设置名</strong></th>\n<th><strong>描述</strong></th>\n<th><strong>有效值</strong></th>\n<th><strong>默认值</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>cacheEnabled</td>\n<td>是否开启缓存</td>\n<td>true       false</td>\n<td>true</td>\n</tr>\n<tr>\n<td>logImpl</td>\n<td>指定 MyBatis 所用日志的具体实现，未指定时将自动查找。</td>\n<td>SLF4J  LOG4J  LOG4J2  JDK_LOGGING  COMMONS_LOGGING  STDOUT_LOGGING  NO_LOGGING</td>\n<td>未设置</td>\n</tr>\n</tbody></table>\n<p>平时使用中我们用的最多的就是日志了</p>\n<p>其他稍做了解即可，到需要用时可以直接查询官方文档</p>\n<p>一个配置完整的 settings 元素的示例如下：</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;settings&gt;\n  &lt;setting name&#x3D;&quot;cacheEnabled&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;lazyLoadingEnabled&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;multipleResultSetsEnabled&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;useColumnLabel&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;useGeneratedKeys&quot; value&#x3D;&quot;false&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;autoMappingBehavior&quot; value&#x3D;&quot;PARTIAL&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;autoMappingUnknownColumnBehavior&quot; value&#x3D;&quot;WARNING&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;defaultExecutorType&quot; value&#x3D;&quot;SIMPLE&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;defaultStatementTimeout&quot; value&#x3D;&quot;25&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;defaultFetchSize&quot; value&#x3D;&quot;100&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;safeRowBoundsEnabled&quot; value&#x3D;&quot;false&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;mapUnderscoreToCamelCase&quot; value&#x3D;&quot;false&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;localCacheScope&quot; value&#x3D;&quot;SESSION&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;jdbcTypeForNull&quot; value&#x3D;&quot;OTHER&quot;&#x2F;&gt;\n  &lt;setting name&#x3D;&quot;lazyLoadTriggerMethods&quot; value&#x3D;&quot;equals,clone,hashCode,toString&quot;&#x2F;&gt;\n&lt;&#x2F;settings&gt;</code></pre>\n\n<h3 id=\"2-3类型别名\"><a href=\"#2-3类型别名\" class=\"headerlink\" title=\"2.3类型别名\"></a>2.3类型别名</h3><p>类型别名可为 Java 类型设置一个缩写名字。 它仅用于 XML 配置，意在降低冗余的全限定类名书写</p>\n<p>比如：</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;typeAliases&gt;\n  &lt;typeAlias alias&#x3D;&quot;Author&quot; type&#x3D;&quot;domain.blog.Author&quot;&#x2F;&gt;\n&lt;&#x2F;typeAliases&gt;</code></pre>\n\n<p>当我们使用这样的配置时</p>\n<p>在任何我们需要使用到domain.blog.Author时我们都可以使用Author来代替</p>\n<p>我们也可以指定一个包</p>\n<p>mybatis会自动把我们指定的包下的所有Bean都生成一个别名</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;typeAliases&gt;\n  &lt;package name&#x3D;&quot;domain.blog&quot;&#x2F;&gt;\n&lt;&#x2F;typeAliases&gt;</code></pre>\n\n<p>当然我们也可以使用注解来把我们需要使用别名的类标注</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@Alias(&quot;author&quot;)\npublic class Author &#123;\n    ...\n&#125;</code></pre>\n\n<p>这样我们就可以使用author来代替domain.blog.Author</p>\n<p>Mybatis它自己也为我们定义了一些常用数据类型或者类的别名</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">别名</th>\n<th align=\"left\">映射的类型</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">_byte</td>\n<td align=\"left\">byte</td>\n</tr>\n<tr>\n<td align=\"left\">_long</td>\n<td align=\"left\">long</td>\n</tr>\n<tr>\n<td align=\"left\">_short</td>\n<td align=\"left\">short</td>\n</tr>\n<tr>\n<td align=\"left\">_int</td>\n<td align=\"left\">int</td>\n</tr>\n<tr>\n<td align=\"left\">_integer</td>\n<td align=\"left\">int</td>\n</tr>\n<tr>\n<td align=\"left\">_double</td>\n<td align=\"left\">double</td>\n</tr>\n<tr>\n<td align=\"left\">_float</td>\n<td align=\"left\">float</td>\n</tr>\n<tr>\n<td align=\"left\">_boolean</td>\n<td align=\"left\">boolean</td>\n</tr>\n<tr>\n<td align=\"left\">string</td>\n<td align=\"left\">String</td>\n</tr>\n<tr>\n<td align=\"left\">byte</td>\n<td align=\"left\">Byte</td>\n</tr>\n<tr>\n<td align=\"left\">long</td>\n<td align=\"left\">Long</td>\n</tr>\n<tr>\n<td align=\"left\">short</td>\n<td align=\"left\">Short</td>\n</tr>\n<tr>\n<td align=\"left\">int</td>\n<td align=\"left\">Integer</td>\n</tr>\n<tr>\n<td align=\"left\">integer</td>\n<td align=\"left\">Integer</td>\n</tr>\n<tr>\n<td align=\"left\">double</td>\n<td align=\"left\">Double</td>\n</tr>\n<tr>\n<td align=\"left\">float</td>\n<td align=\"left\">Float</td>\n</tr>\n<tr>\n<td align=\"left\">boolean</td>\n<td align=\"left\">Boolean</td>\n</tr>\n<tr>\n<td align=\"left\">date</td>\n<td align=\"left\">Date</td>\n</tr>\n<tr>\n<td align=\"left\">decimal</td>\n<td align=\"left\">BigDecimal</td>\n</tr>\n<tr>\n<td align=\"left\">bigdecimal</td>\n<td align=\"left\">BigDecimal</td>\n</tr>\n<tr>\n<td align=\"left\">object</td>\n<td align=\"left\">Object</td>\n</tr>\n<tr>\n<td align=\"left\">map</td>\n<td align=\"left\">Map</td>\n</tr>\n<tr>\n<td align=\"left\">hashmap</td>\n<td align=\"left\">HashMap</td>\n</tr>\n<tr>\n<td align=\"left\">list</td>\n<td align=\"left\">List</td>\n</tr>\n<tr>\n<td align=\"left\">arraylist</td>\n<td align=\"left\">ArrayList</td>\n</tr>\n<tr>\n<td align=\"left\">collection</td>\n<td align=\"left\">Collection</td>\n</tr>\n<tr>\n<td align=\"left\">iterator</td>\n<td align=\"left\">Iterator</td>\n</tr>\n</tbody></table>\n<h3 id=\"2-4插件\"><a href=\"#2-4插件\" class=\"headerlink\" title=\"2.4插件\"></a>2.4插件</h3><p>当我们在使用mybatis时有时候会遇到功能不够用的情况</p>\n<p>我们可以使用插件</p>\n<p>比如我在做分页时可以导入一个<code>pagehelper</code>的插件来帮助我完成分页</p>\n<p>例如：</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;plugins&gt;\n    &lt;!-- com.github.pagehelper为PageHelper类所在包名 --&gt;\n    &lt;plugin interceptor&#x3D;&quot;com.github.pagehelper.PageInterceptor&quot;&gt;\n        &lt;property name&#x3D;&quot;param1&quot; value&#x3D;&quot;value1&quot;&#x2F;&gt;\n\t&lt;&#x2F;plugin&gt;\n&lt;&#x2F;plugins&gt;</code></pre>\n\n<h3 id=\"2-5环境配置\"><a href=\"#2-5环境配置\" class=\"headerlink\" title=\"2.5环境配置\"></a>2.5环境配置</h3><p>MyBatis 可以配置成适应多种环境，这种机制有助于将 SQL 映射应用于多种数据库之中， 现实情况下有多种理由需要这么做。例如，开发、测试和生产环境需要有不同的配置；或者想在具有相同 Schema 的多个生产数据库中使用相同的 SQL 映射。还有许多类似的使用场景。</p>\n<p><strong>不过要记住：尽管可以配置多个环境，但每个 SqlSessionFactory 实例只能选择一种环境。</strong></p>\n<p>所以，如果你想连接两个数据库，就需要创建两个 SqlSessionFactory 实例，每个数据库对应一个。而如果是三个数据库，就需要三个实例，依此类推</p>\n<p>environments 元素定义了如何配置环境。</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;environments default&#x3D;&quot;development&quot;&gt;\n  &lt;environment id&#x3D;&quot;development&quot;&gt;\n    &lt;transactionManager type&#x3D;&quot;JDBC&quot;&gt;\n      &lt;property name&#x3D;&quot;...&quot; value&#x3D;&quot;...&quot;&#x2F;&gt;\n    &lt;&#x2F;transactionManager&gt;\n    &lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;\n      &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;$&#123;driver&#125;&quot;&#x2F;&gt;\n      &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;$&#123;url&#125;&quot;&#x2F;&gt;\n      &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;username&#125;&quot;&#x2F;&gt;\n      &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;$&#123;password&#125;&quot;&#x2F;&gt;\n    &lt;&#x2F;dataSource&gt;\n  &lt;&#x2F;environment&gt;\n&lt;&#x2F;environments&gt;</code></pre>\n\n<p>注意一些关键点:</p>\n<ul>\n<li>默认使用的环境 ID（比如：default=”development”）。</li>\n<li>每个 environment 元素定义的环境 ID（比如：id=”development”）。</li>\n<li>事务管理器的配置（比如：type=”JDBC”）。</li>\n<li>数据源(连接池)的配置（比如：type=”POOLED”）。</li>\n</ul>\n<p><strong>事务管理器</strong></p>\n<p>在 MyBatis 中有两种类型的事务管理器（也就是 type=”[JDBC|MANAGED]”）</p>\n<p>通常情况下我们会使用JDBC，因为JDBC有事务提交和回滚</p>\n<p>而MANAGED则从不提交或者回滚</p>\n<p><strong>数据源（dataSource）</strong></p>\n<p>dataSource 元素使用标准的 JDBC 数据源接口来配置 JDBC 连接对象的资源。</p>\n<ul>\n<li>大多数 MyBatis 应用程序会按示例中的例子来配置数据源。虽然数据源配置是可选的，但如果要启用延迟加载特性，就必须配置数据源。</li>\n</ul>\n<p>Mybatis有三种内建的数据源类型（也就是 type=”[UNPOOLED|POOLED|JNDI]”）</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><strong>UNPOOLED</strong></p></blockquote>\n<p>这个数据源的实现会每次请求时打开和关闭连接,会比较浪费服务器资源，对那些数据库连接可用性要求不高的简单应用程序来说，是一个很好的选择，性能比较依赖于数据库类型，这种类型的数据源需要以下配置：</p>\n<ul>\n<li><code>driver</code> –&gt;数据库驱动类名</li>\n<li><code>url</code>–&gt;数据库url地址</li>\n<li><code>username</code>–&gt;数据库登陆名</li>\n<li><code>password</code>–&gt;数据库登陆密码</li>\n<li><code>defaultTransactionIsolationLevel</code> –&gt; 默认的连接事务隔离级别。</li>\n<li><code>defaultNetworkTimeout</code>–&gt;数据库默认链接超时时间</li>\n<li><code>driver.encoding=UTF8</code>–&gt;设置数据库编码格式为UTF-8</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><strong>POOLED</strong></p></blockquote>\n<p>这种数据源的实现利用“池”的概念将 JDBC 连接对象组织起来，避免了创建新的连接实例时所必需的初始化和认证时间。 这种处理方式很流行，能使并发 Web 应用快速响应请求。</p>\n<p>这种类型的数据源除了需要上面的配置之外还可以配置更多的属性</p>\n<p>详细可见官网<br><img src=\"https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/03/06/kuangstudye7698b11-76e2-4099-97b2-d97ea5d3b696.png\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><strong>JNDI</strong></p></blockquote>\n<p>这个数据源实现是为了能在如 EJB 或应用服务器这类容器中使用，容器可以集中或在外部配置数据源，然后放置一个 JNDI 上下文的数据源引用。这种数据源配置只需要两个属性</p>\n<ul>\n<li><code>initial_context</code> – 这个属性用来在 InitialContext 中寻找上下文（即，initialContext.lookup(initial_context)）。这是个可选属性，如果忽略，那么将会直接从 InitialContext 中寻找 data_source 属性。</li>\n<li><code>data_source</code> – 这是引用数据源实例位置的上下文路径。提供了 initial_context 配置时会在其返回的上下文中进行查找，没有提供时则直接在 InitialContext 中查找。</li>\n</ul>\n<h3 id=\"2-6映射器\"><a href=\"#2-6映射器\" class=\"headerlink\" title=\"2.6映射器\"></a>2.6映射器</h3><p> MyBatis 的行为已经由上述元素配置完了，我们现在就要来定义 SQL 映射语句了，我们需要告诉 MyBatis 到哪里去找到这些SQL语句。 在自动查找资源方面，Java 并没有提供一个很好的解决方案，所以最好的办法是直接告诉 MyBatis 到哪里去找映射文件</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;!-- 使用相对于类路径的资源引用 --&gt;\n&lt;mappers&gt;\n  &lt;mapper resource&#x3D;&quot;org&#x2F;mybatis&#x2F;builder&#x2F;AuthorMapper.xml&quot;&#x2F;&gt;\n  &lt;mapper resource&#x3D;&quot;org&#x2F;mybatis&#x2F;builder&#x2F;BlogMapper.xml&quot;&#x2F;&gt;\n  &lt;mapper resource&#x3D;&quot;org&#x2F;mybatis&#x2F;builder&#x2F;PostMapper.xml&quot;&#x2F;&gt;\n&lt;&#x2F;mappers&gt;</code></pre>\n\n<p>因为我的mapper.xml文件通常放在resources文件目录下</p>\n<p>所以使用这种注册方式比较多</p>\n<p>当然如果你把mapper.xml文件放入了src下的java目录下也可以使用这两种方式</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;!-- 使用映射器接口实现类的完全限定类名 --&gt;\n&lt;mappers&gt;\n  &lt;mapper class&#x3D;&quot;org.mybatis.builder.AuthorMapper&quot;&#x2F;&gt;\n  &lt;mapper class&#x3D;&quot;org.mybatis.builder.BlogMapper&quot;&#x2F;&gt;\n  &lt;mapper class&#x3D;&quot;org.mybatis.builder.PostMapper&quot;&#x2F;&gt;\n&lt;&#x2F;mappers&gt;\n\n&lt;!-- 将包内的映射器接口实现全部注册为映射器 --&gt;\n&lt;mappers&gt;\n  &lt;package name&#x3D;&quot;org.mybatis.builder&quot;&#x2F;&gt;\n&lt;&#x2F;mappers&gt;</code></pre>\n\n<p><strong>注意：使用这两种方法必须把Mapper接口和Mapper.xml文件放在同一目录下</strong></p>\n","text":"Mybatis配置详解 MyBatis 的配置文件包含了会深深影响 MyBatis 行为的设置和属性信息。 注意：这些配置的上下顺序必须严格按照约定顺序来，否则就会报错 configuration properties(属性) setting(设置) typeAliases(别名...","link":"","photos":[],"count_time":{"symbolsCount":"8.9k","symbolsTime":"8 mins."},"categories":[{"name":"Mybatis","slug":"Mybatis","count":2,"path":"api/categories/Mybatis.json"}],"tags":[{"name":"Mybatis","slug":"Mybatis","count":2,"path":"api/tags/Mybatis.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Mybatis%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3\"><span class=\"toc-text\">Mybatis配置详解</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-1%E5%B1%9E%E6%80%A7\"><span class=\"toc-text\">1.1属性</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-2%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">2.2设置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-3%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D\"><span class=\"toc-text\">2.3类型别名</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-4%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">2.4插件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-5%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">2.5环境配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-6%E6%98%A0%E5%B0%84%E5%99%A8\"><span class=\"toc-text\">2.6映射器</span></a></li></ol></li></ol>","author":{"name":"zniceya","slug":"zniceya","avatar":"https://gitee.com/zniceya/picgo/raw/master/image/20220211200943.jpeg","link":"/","description":"hexo,nicely,blog,aurora","socials":{"github":"https://github.com/znicelya","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://gitee.com/zniceya/picgo/raw/master/image/20220221095422.png","link":"https://space.bilibili.com/177279267"}}}},"mapped":true,"prev_post":{"title":"Docker安装Nginx","uid":"8921f219ac1cdcf63bd94ba3e8d2edd1","slug":"Docker安装Nginx","date":"2022-02-11T09:22:11.000Z","updated":"2022-02-12T06:44:36.593Z","comments":true,"path":"api/articles/Docker安装Nginx.json","keywords":null,"cover":"https://imgapi.cn/api.php?zd=zsy&fl=fengjing&gs=images","text":"Docker安装Niginx搜索镜像docker serach nginx 拉取镜像拉取最新镜像 docker pull nginx:latest 查看镜像docker image ls 运行nginxdocker run nginx -d -p 80:80 nginx 这时候我...","link":"","photos":[],"count_time":{"symbolsCount":898,"symbolsTime":"1 mins."},"categories":[{"name":"Docker","slug":"Docker","count":3,"path":"api/categories/Docker.json"}],"tags":[{"name":"Docker","slug":"Docker","count":3,"path":"api/tags/Docker.json"}],"author":{"name":"zniceya","slug":"zniceya","avatar":"https://gitee.com/zniceya/picgo/raw/master/image/20220211200943.jpeg","link":"/","description":"hexo,nicely,blog,aurora","socials":{"github":"https://github.com/znicelya","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://gitee.com/zniceya/picgo/raw/master/image/20220221095422.png","link":"https://space.bilibili.com/177279267"}}}}},"next_post":{"title":"工厂方法模式","uid":"a9afe666d8181b7b8b74143880e7533b","slug":"工厂方法模式","date":"2022-02-09T13:10:56.000Z","updated":"2022-02-12T06:44:36.593Z","comments":true,"path":"api/articles/工厂方法模式.json","keywords":null,"cover":"https://imgapi.cn/api.php?zd=zsy&fl=fengjing&gs=images","text":" 沉淀、分享、成长，让自己和他人都能有所收获！ 前言好看的代码千篇一律，恶心的程序升职加薪。 几乎是程序员就都知道或者了解设计模式，但大部分小伙伴写代码总是习惯于一把梭。无论多少业务逻辑就一个类几千行，这样的开发也可以归纳为三步；定义属性、创建方法、调用展示，Done！只不过开发...","link":"","photos":[],"count_time":{"symbolsCount":"3.2k","symbolsTime":"3 mins."},"categories":[{"name":"设计模式","slug":"设计模式","count":1,"path":"api/categories/设计模式.json"}],"tags":[{"name":"工厂方法模式","slug":"工厂方法模式","count":1,"path":"api/tags/工厂方法模式.json"}],"author":{"name":"zniceya","slug":"zniceya","avatar":"https://gitee.com/zniceya/picgo/raw/master/image/20220211200943.jpeg","link":"/","description":"hexo,nicely,blog,aurora","socials":{"github":"https://github.com/znicelya","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://gitee.com/zniceya/picgo/raw/master/image/20220221095422.png","link":"https://space.bilibili.com/177279267"}}}}}}