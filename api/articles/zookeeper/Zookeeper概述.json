{"title":"Zookeeper概述","uid":"07093428334d4e05f766e4aacfd1b9ce","slug":"zookeeper/Zookeeper概述","date":"2022-02-14T04:40:21.000Z","updated":"2022-02-16T07:20:32.592Z","comments":true,"path":"api/articles/zookeeper/Zookeeper概述.json","keywords":null,"cover":"https://gitee.com/zniceya/picgo/raw/master/image/20220209131628.png","content":"<h3 id=\"1-Zookeeper概述\"><a href=\"#1-Zookeeper概述\" class=\"headerlink\" title=\"1. Zookeeper概述\"></a>1. Zookeeper概述</h3><h4 id=\"1-1-Zookeeper背景\"><a href=\"#1-1-Zookeeper背景\" class=\"headerlink\" title=\"1.1 Zookeeper背景\"></a>1.1 Zookeeper背景</h4><p>　　随着互联网技术的发展，企业对计算机系统的计算，存储能力要求越来越高，各大IT企业都在追求高并发，海量存储的极致，在这样的背景下，单纯依靠少量高性能单机来完成计算机，云计算的任务已经无法满足需求，企业的IT架构逐渐由集中式往分布式过渡。所谓的分布式是指：把一个计算任务分解成若干个计算单元，并分派到不同的计算机中去执行，最终汇总计算结果的过程。</p>\n<h4 id=\"1-2-Zookeeper概述\"><a href=\"#1-2-Zookeeper概述\" class=\"headerlink\" title=\"1.2 Zookeeper概述\"></a>1.2 Zookeeper概述</h4><p>　　Zookeeper是源代码开放的分布式协调服务，是一个高性能的分布式数据一致性的解决方案，它将那些复杂的，容易出错的分布式一致性服务封装起来。用户可以通过调用Zookeeper提供的接口来解决一些分布式应用中的实际问题。</p>\n<h4 id=\"1-3-Zookeeper典型应用场景\"><a href=\"#1-3-Zookeeper典型应用场景\" class=\"headerlink\" title=\"1.3 Zookeeper典型应用场景\"></a>1.3 Zookeeper典型应用场景</h4><ul>\n<li><strong>数据发布/订阅</strong></li>\n</ul>\n<p>　　数据的发布与订阅，顾名思义就是一方把数据发布出来，另一方通过某种手段获取。</p>\n<p>　　通常数据发布与订阅有两种模式：推模式和拉模式，推模式一般是服务器主动往客户端推送信息，拉模式是客户端主动去服务端请求目标数据（通常采用定时轮询的方式）</p>\n<p>　　Zookeeper采用两种方式互相结合：发布者将数据发布到Zookeeper集群节点上，订阅者通过一定的方法告诉Zookeeper服务器，自己对哪个节点的数据感兴趣，那么在服务端数据发生变化时，就会通知客户端去获取这些信息。</p>\n<ul>\n<li><strong>负载均衡</strong></li>\n</ul>\n<p>　　　　 <img src=\"https://gitee.com/zniceya/picgo/raw/master/image/20220209131628.png\" alt=\"img\"></p>\n<p>　　首先在服务端启动的时候，把自己在zookeeper服务器上注册成一个临时节点。zookeeper拥有两种形式的节点，一种是临时节点，一种是永久节点。这两种节点后面的博客会有较为详细的介绍。注册成临时节点后，再服务端出问题时，节点会自动的从zookeeper上删除，如此zookeeper服务器上的列表就是最新的可用的列表。</p>\n<p>　　客户端在需要访问服务器的时候首先会去Zookeeper获得所有可用的服务端的连接信息。</p>\n<p>　　客户端通过一定的策略（如随机）选择一个与之建立连接。</p>\n<p>　　当客户端发现连接不可用时，会再次从zookeeper上获取可用的服务端连接，并同时删除之前获取的连接列表。</p>\n<ul>\n<li><strong>命名服务</strong></li>\n</ul>\n<p>　　提供名称的服务。如一般使用较多的有两种id，一种是数据库自增长id，一种是UUID，两种id都有局限，自增长id仅适合在单表单库中使用，uuid适合在分布式系统中使用但由于id没有规律难以理解。而ZK提供了一定的接口可以用来获取一个顺序增长的，可以在集群环境下使用的id。</p>\n<ul>\n<li><strong>分布式协调，通知，心跳服务</strong></li>\n</ul>\n<p>　　在分布式服务系统中，我们常常需要知道哪个服务是可用的，哪个服务是不可用的，传统的方式是通过ping主机来实现的，ping得200的结果说明说明该服务是OK的。</p>\n<p>　　而在使用 zookeeper时，可以将所有的服务都注册成一个临时节点，我们判断一个服务是否可用，只需要判断这个节点是否在zookeeper集群中存在就可以了，不需要直接去连接和ping服务所在主机，减少系统的复杂度和对服务主机的压力。</p>\n<h4 id=\"1-4-Zookeeper优势\"><a href=\"#1-4-Zookeeper优势\" class=\"headerlink\" title=\"1.4 Zookeeper优势\"></a>1.4 Zookeeper优势</h4><ul>\n<li><p>源代码开放</p>\n</li>\n<li><p>高性能，易用稳定，该优势已在众多分布式系统中得到验证</p>\n</li>\n<li><p>有着广泛的应用，并且与众多大数据相关技术能实现良好的融合开发。</p>\n</li>\n</ul>\n<h4 id=\"1-5-Zookeeper特点\"><a href=\"#1-5-Zookeeper特点\" class=\"headerlink\" title=\"1.5 Zookeeper特点\"></a>1.5 Zookeeper特点</h4><ul>\n<li>Zookeeper : 一个领导者 leader ，多个跟随者 follower 组成的集群</li>\n<li>集群只要有<code>半数以上</code>节点存活，Zookeeper集群就能正常工作。所以zookeeper集群适合安装奇数台服务器</li>\n<li>全局数据一致：每个server保存一份相同的数据副本，Client无论连接哪一台Server，数据都是一致的</li>\n<li>更新请求顺序执行，来自同一个Client的更新请求按其发送顺序执行</li>\n<li>数据更新原子性，一次更新要么成功，要么失败</li>\n<li>实时性，在一定时间范围内，Client能读到最新数据</li>\n</ul>\n","text":"1. Zookeeper概述1.1 Zookeeper背景 随着互联网技术的发展，企业对计算机系统的计算，存储能力要求越来越高，各大IT企业都在追求高并发，海量存储的极致，在这样的背景下，单纯依靠少量高性能单机来完成计算机，云计算的任务已经无法满足需求，企业的IT架构逐渐由集中式...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"zookeeper","slug":"zookeeper","count":5,"path":"api/categories/zookeeper.json"}],"tags":[{"name":"zookeeper","slug":"zookeeper","count":5,"path":"api/tags/zookeeper.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-Zookeeper%E6%A6%82%E8%BF%B0\"><span class=\"toc-text\">1. Zookeeper概述</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-Zookeeper%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">1.1 Zookeeper背景</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-2-Zookeeper%E6%A6%82%E8%BF%B0\"><span class=\"toc-text\">1.2 Zookeeper概述</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-3-Zookeeper%E5%85%B8%E5%9E%8B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">1.3 Zookeeper典型应用场景</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-4-Zookeeper%E4%BC%98%E5%8A%BF\"><span class=\"toc-text\">1.4 Zookeeper优势</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-5-Zookeeper%E7%89%B9%E7%82%B9\"><span class=\"toc-text\">1.5 Zookeeper特点</span></a></li></ol></li></ol>","author":{"name":"zniceya","slug":"zniceya","avatar":"https://gitee.com/zniceya/picgo/raw/master/image/20220211200943.jpeg","link":"/","description":"hexo,nicely,blog,aurora","socials":{"github":"https://github.com/znicelya","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://gitee.com/zniceya/picgo/raw/master/image/u=839977396,1548112407&fm=253&fmt=auto&app=138&f=JPEG","link":"https://space.bilibili.com/177279267"}}}},"mapped":true,"prev_post":{"title":"Zookeeper数据结构","uid":"05e68499718743acc72aacd2dcdacd5c","slug":"zookeeper/Zookeeper数据结构","date":"2022-02-14T04:41:21.000Z","updated":"2022-02-16T07:20:32.592Z","comments":true,"path":"api/articles/zookeeper/Zookeeper数据结构.json","keywords":null,"cover":"https://gitee.com/zniceya/picgo/raw/master/image/20220215143300.jpeg","text":"Zookeeper数据结构2.1 名称空间zookkeeper 提供的名称空间非常类似于标准文件系统，key-value 的形式存储。名称 key 由斜线 / 分割的一系列路径元素，zookeeper 名称空间中的每个节点都是由一个路径标识。 2.2 Zookeeper如何存储数...","link":"","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"zookeeper","slug":"zookeeper","count":5,"path":"api/categories/zookeeper.json"}],"tags":[{"name":"zookeeper","slug":"zookeeper","count":5,"path":"api/tags/zookeeper.json"}],"author":{"name":"zniceya","slug":"zniceya","avatar":"https://gitee.com/zniceya/picgo/raw/master/image/20220211200943.jpeg","link":"/","description":"hexo,nicely,blog,aurora","socials":{"github":"https://github.com/znicelya","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://gitee.com/zniceya/picgo/raw/master/image/u=839977396,1548112407&fm=253&fmt=auto&app=138&f=JPEG","link":"https://space.bilibili.com/177279267"}}}}},"next_post":{"title":"Zookeeper安装","uid":"7466612641d081c2147b711ae5edcb46","slug":"zookeeper/Zookeeper安装","date":"2022-02-14T04:20:21.000Z","updated":"2022-02-16T07:50:35.557Z","comments":true,"path":"api/articles/zookeeper/Zookeeper安装.json","keywords":null,"cover":"https://gitee.com/zniceya/picgo/raw/master/image/20220215180858.png","text":"Zookeeper安装1. 单机安装1.1官网zookeeper 下载地址为: https://zookeeper.apache.org/releases.html 选择一个稳定版本 我这里选择的是3.7.0 1.2点击下载 1.3解压 建立数据存放目录 data 和日志存放目录...","link":"","photos":[],"count_time":{"symbolsCount":798,"symbolsTime":"1 mins."},"categories":[{"name":"zookeeper","slug":"zookeeper","count":5,"path":"api/categories/zookeeper.json"}],"tags":[{"name":"zookeeper","slug":"zookeeper","count":5,"path":"api/tags/zookeeper.json"}],"author":{"name":"zniceya","slug":"zniceya","avatar":"https://gitee.com/zniceya/picgo/raw/master/image/20220211200943.jpeg","link":"/","description":"hexo,nicely,blog,aurora","socials":{"github":"https://github.com/znicelya","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://gitee.com/zniceya/picgo/raw/master/image/u=839977396,1548112407&fm=253&fmt=auto&app=138&f=JPEG","link":"https://space.bilibili.com/177279267"}}}}}}