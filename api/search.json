[{"id":"b9663f58f18133b35bfe243f3e916a80","title":"Hello World","content":"\n\n\n\n\n\n\n\n\n沉淀、分享、成长，让自己和他人都能有所收获！\n前言好看的代码千篇一律，恶心的程序升职加薪。\n\n\n\n\n\n\n\n\n\n几乎是程序员就都知道或者了解设计模式，但大部分小伙伴写代码总是习惯于一把梭。无论多少业务逻辑就一个类几千行，这样的开发也可以归纳为三步；定义属性、创建方法、调用展示，Done！只不过开发一时爽，重构火葬场。\n\n\n\n\n\n\n\n\n\n好的代码不只为了完成现有功能，也会考虑后续扩展。在结构设计上松耦合易读易扩展，在领域实现上高内聚不对外暴漏实现细节不被外部干扰。而这就有点像家里三居(MVC)室、四居(DDD)室的装修，你不会允许几十万的房子把走线水管裸漏在外面，也不会允许把马桶放到厨房，炉灶安装到卫生间。\n开发环境\njdk1.8\nIDEA+Maven\n\n工厂方法模式介绍\n\n工厂方法模式，图片来自 refactoringguru.cn\n\n工厂模式又称工厂方法模式，是一种创建型设计模式，其在父类中提供一个创建对象的方法， 允许子类决定实例化对象的类型。\n这种设计模式也是 Java 开发中最常见的一种模式，它的主要意图是定义一个创建对象的接口，让其子类自己决定实例化哪一个工厂类，工厂模式使其创建过程延迟到子类进行。\n简单说就是为了提供代码结构的扩展性，屏蔽每一个功能类中的具体实现逻辑。让外部可以更加简单的只是知道调用即可，同时，这也是去掉众多ifelse的方式。当然这可能也有一些缺点，比如需要实现的类非常多，如何去维护，怎样减低开发成本。但这些问题都可以在后续的设计模式结合使用中，逐步降低\nexampleif…else…直接上代码\nif (val &#x3D;&#x3D; 1)&#123;\n    A a &#x3D; new A();\n    a.setA(1);\n    &#x2F;&#x2F; do something\n    log.info(&quot;执行A操作:&#123;&#125;&quot;,a);\n&#125;else if (val &#x3D;&#x3D; 2)&#123;\n    B b &#x3D; new B();\n    b.setB(2);\n    b.setBStr(&quot;BBBB&quot;);\n    &#x2F;&#x2F; do something\n    log.info(&quot;执行B操作:&#123;&#125;&quot;,b);\n&#125;else if (val &#x3D;&#x3D; 3)&#123;\n    C c &#x3D; new C();\n    c.setC(true);\n    &#x2F;&#x2F; do something\n    log.info(&quot;执行C操作:&#123;&#125;&quot;,c);\n&#125;\n\n\n如上就是使用 ifelse 非常直接的实现出来业务需求的一坨代码，如果仅从业务角度看，研发如期甚至提前实现了功能。\n那这样的代码目前来看并不会有什么问题，但如果在经过几次的迭代和拓展，接手这段代码的研发将十分痛苦。重构成本高需要理清之前每一个接口的使用，测试回归验证时间长，需要全部验证一次。这也就是很多人并不愿意接手别人的代码，如果接手了又被压榨开发时间。那么可想而知这样的 ifelse 还会继续增加。\n\nfactory接下来使用工厂方法模式来进行代码优化，也算是一次很小的重构。整理重构会你会发现代码结构清晰了、也具备了下次新增业务需求的扩展性。但在实际使用中还会对此进行完善，目前的只是抽离出最核心的部分体现到你面前，方便学习\n\n\n\n\n\n\n\n\n\n 定义接口\npublic interface IWord &#123;\n\n    void sayHello(int id, String name, Map&lt;String,Object&gt; extMap);\n\n&#125;\n\n\n\n\n\n\n\n\n\n\n实现接口\n@Slf4j\npublic class FactoryImpA implements IWord &#123;\n\n    @Override\n    public void sayHello(int id, String name, Map&lt;String, Object&gt; extMap) &#123;\n        log.info(&quot;id:&#123;&#125;,name:&#123;&#125;,map:&#123;&#125;&quot;,id,name,extMap);\n&#x2F;&#x2F;        Object something &#x3D; extMap.get(&quot;something&quot;);\n&#x2F;&#x2F;        something.doSomething\n    &#125;\n&#125;\n\n实现多个对应多个业务\n\n从上面可以看到每一种实现都包括在自己的类中，新增、修改或者删除都不会影响其他功能的测试，降低回归测试的可能。\n后续在新增的只需要按照此结构进行填充即可，非常易于维护和扩展。\n在统一了入参以及出参后，调用方不在需要关心内部逻辑，按照统一的方式即可处理\n\n\n\n\n\n\n\n\n\n\n创建工厂\npublic class WordFactory &#123;\n\n    public IWord getWordByVal(Integer val)&#123;\n        if (val &#x3D;&#x3D; null) return null;\n        if (val &#x3D;&#x3D; 1) return new FactoryImpA();\n&#x2F;&#x2F;        if (val &#x3D;&#x3D; 2) return .....\n        throw new RuntimeException(&quot;没有合适类型!&quot;);\n    &#125;\n&#125;\n\n\n\n这里我们定义了一个工厂类，在里面按照类型实现各种服务。可以非常干净整洁的处理你的代码，后续新增的在这里扩展即可。如果你不喜欢if判断，也可以使用switch或者map配置结构，会让代码更加干净。\n另外很多代码检查软件和编码要求，不喜欢if语句后面不写扩展，这里是为了更加干净的向你体现逻辑。在实际的业务编码中可以添加括号\n\n\n\n\n\n\n\n\n\n\n测试验证\nprivate void factoryTest(int val)&#123;\n    IWord wordByVal &#x3D; new WordFactory().getWordByVal(val);\n    wordByVal.sayHello(1,&quot;张三&quot;,new HashMap&lt;&gt;());\n&#125;\n\n\n\n总结\n从上到下的优化来看，工厂方法模式并不复杂，甚至这样的开发结构在你有所理解后，会发现更加简单了。\n那么这样的开发的好处知道后，也可以总结出来它的优点；避免创建者与具体的产品逻辑耦合、满足单一职责，每一个业务逻辑实现都在所属自己的类中完成、满足开闭原则，无需更改使用调用方就可以在程序中引入新的产品类型。但这样也会带来一些问题，比如有非常多的奖品类型，那么实现的子类会极速扩张。因此也需要使用其他的模式进行优化，这些在后续的设计模式中会逐步涉及到。\n从案例入手看设计模式往往要比看理论学的更加容易，因为案例是缩短理论到上手的最佳方式，如果你已经有所收获，一定要去尝试实操。\n\n","slug":"工厂方法模式","date":"2022-02-09T12:46:25.000Z","categories_index":"","tags_index":"","author_index":"znicelya"},{"id":"b9663f58f18133b35bfe243f3e916a80","title":"Hello World","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n","slug":"hello-world","date":"2022-02-08T08:50:28.283Z","categories_index":"","tags_index":"","author_index":"znicelya"}]